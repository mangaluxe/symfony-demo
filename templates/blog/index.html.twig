{% extends 'base.html.twig' %}

{% block title %}Liste des articles{% endblock %}

{% block body %}

    {# Affiche liste des articles #}

    <section class="articles">

        {% for article in articles %}
        <articles>
            <h2>{{ article.title }}</h2>
            <div class="metadata">Ecrit le {{ article.createdAt | date('d/m/Y à H:i:s') }} dans la catégorie {{ article.category.title }}</div>
            <div class="content">
                <img src="{{ article.image }}" alt="">
                <p>{{ article.content | raw }}</p>
                <a href="{{ path('blog_show', {'id': article.id}) }}" class="btn btn-primary">Lire la suite</a> {# La fonction path peut prendre un 2e parametre : {'id': article.id}. On peut aussi écrire {id: article.id} #}

                <a href="{{ path('blog_edit', {'id': article.id}) }}" class="btn btn-primary">Modifier</a>

                {# <a href="{{ path('blog_delete', {'id': article.id}) }}" class="btn btn-danger">Effacer</a> #}

                <form method="post" action="{{ path('blog_delete', {id: article.id}) }}" onsubmit="return confirm('Effacer ?')">
                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ article.id) }}">
                    <button class="btn btn-danger">Supprimer</button>
                </form>
            </div>
        </article>
        {% endfor %}

    </section>
    

{% endblock %}
